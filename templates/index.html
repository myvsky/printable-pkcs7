<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Doc</title>
    <style>
        html {
            background-color: rgb(30,30,40);
            color: aliceblue;
        }
    </style>
</head>
<body>
    <h1>Create stamp for e-signed document.</h1>
    <h2>Only detached documents (signature file *.sig AND original signed document *.pdf allowed)</h2>
    <div>
        Select *.pdf File
        <input type="file" name="pdf_file" id="pdfFileInput"><br>
    </div>
    <div style=margin-top:1%>
        Select *.sig File
        <input type="file" name="sig_file" id="sigFileInput"><br>
    </div>
    <div>
        <button id="uploadButton" style="margin-top:1%">Upload Selected Files</button>
    </div>
    <script>
        function handleFileUpload(url) {
            const formData = new FormData();
            const sigFileInput = document.getElementById("sigFileInput");
            const pdfFileInput = document.getElementById("pdfFileInput");
            if (sigFileInput.files.length > 0) {
                formData.append("sig_file", sigFileInput.files[0]);
            } else {
                alert("Please select a valid .sig file");
                return;
            }
            
            if (pdfFileInput.files.length > 0) {
                formData.append("pdf_file", pdfFileInput.files[0]);
            } else {
                alert("Please select a valid .pdf file");
                return;
            }
            fetch(url, {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                alert("Files uploaded and processed successfully");
            })
            .catch(error => {
                console.error(error);
                alert("Error uploading files");
            });
        }
        const uploadButton = document.getElementById("uploadButton");
        uploadButton.addEventListener("click", () => {
            handleFileUpload("http://localhost:8000/upload");
        });
    </script>    
</body>
</html>
